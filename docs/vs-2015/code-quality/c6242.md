---
title: C6242 | Microsoft-Dokumentation
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C6242
helpviewer_keywords:
- C6242
ms.assetid: 523d46ce-8370-434c-a752-2e3a18cca9a5
caps.latest.revision: 20
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: 857e2c32afcd02c5e5cbfa481ce683d8cdbefd8a
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 09/02/2020
ms.locfileid: "77276162"
---
# <a name="c6242"></a>C6242
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Warnung C6242: Ein Aussprung aus diesem Try-Block erzwingt eine lokale Entladung und hat schwere Leistungseinbußen zur Folge.  
  
 Diese Warnung gibt an, dass der geschützte Block einer try-finally-Anweisung nicht vollständig durchlaufen wurde, weil der Block vorher durch eine Sprunganweisung verlassen wurde.  
  
 Wenn der geschützte Block einer try-finally-Anweisung nicht vollständig bis zur letzten Anweisung durchlaufen wird, muss eine lokale Entladung erfolgen. Für die lokale Entladung sind normalerweise ca. 1.000 Maschinenanweisungen erforderlich, d. h., eine lokale Entladung wirkt sich leistungsmindernd aus.  
  
 Verwenden Sie `_leave`, um den geschützten Block einer try-finally-Anweisung zu verlassen.  
  
## <a name="example"></a>Beispiel  
 Der folgende Code generiert diese Warnung:  
  
```  
#include <malloc.h>  
void DoSomething(char *p); // function can throw exception  
  
int f( )  
{  
   char *ptr = 0;  
   __try   
   {  
      ptr = (char*) malloc(10);  
      if ( !ptr )   
      {  
         return 0;   //Warning: 6242  
      }  
      DoSomething( ptr );  
   }  
   __finally   
   {  
      free( ptr );  
   }  
   return 1;  
}  
```  
  
 Um die Warnung zu korrigieren, verwenden Sie `__leave`, wie im folgenden Code dargestellt:  
  
```  
#include <malloc.h>  
void DoSomething(char *p);   
int f()  
{  
   char *ptr = 0;  
   int retVal = 0;  
  
   __try   
   {  
      ptr = (char *) malloc(10);  
      if ( !ptr )  
      {  
         retVal = 0;  
         __leave;   //No warning  
      }  
      DoSomething( ptr );  
      retVal = 1;  
   }  
   __finally  
   {  
      free( ptr );  
   }  
  
   return retVal;  
}  
```  
  
 Die Verwendung von "malloc" und "free" kann viele Fehler im Sinne von Speicherverlusten und Ausnahmen verursachen. Um diese Arten von Speicherverlusten und Ausnahmen vollständig zu vermeiden, verwenden Sie die Mechanismen, die von der C++-Standardvorlagenbibliothek (STL) bereitgestellt werden. Hierzu gehören [shared_ptr](https://msdn.microsoft.com/library/1469fc51-c658-43f1-886c-f4530dd84860), [unique_ptr](https://msdn.microsoft.com/library/acdf046b-831e-4a4a-83aa-6d4ee467db9a)und [Vektor](https://msdn.microsoft.com/library/c1431ad8-c0b6-4dbb-89c4-5f651e432d7f). Weitere Informationen finden Sie unter [intelligente Zeiger](https://msdn.microsoft.com/library/909ef870-904c-49b6-b8cd-e9d0b7dc9435) und [C++-Standard Bibliothek](https://msdn.microsoft.com/library/a37d3ba3-58af-47c7-9ee2-441ccd7b77ee).  
  
## <a name="see-also"></a>Weitere Informationen  
 [try-finally-Anweisung](https://msdn.microsoft.com/library/826e0347-ddfe-4f6e-a7bc-0398e0edc7c2)
